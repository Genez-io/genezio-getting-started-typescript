"use strict";(()=>{var m=function(i,c,t,a){function r(e){return e instanceof t?e:new t(function(s){s(e)})}return new(t||(t=Promise))(function(e,s){function u(o){try{n(a.next(o))}catch(l){s(l)}}function h(o){try{n(a.throw(o))}catch(l){s(l)}}function n(o){o.done?e(o.value):r(o.value).then(u,h)}n((a=a.apply(i,c||[])).next())})},p=function(i,c){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(n){return function(o){return h([n,o])}}function h(n){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(t=0)),t;)try{if(a=1,r&&(e=n[0]&2?r.return:n[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,n[1])).done)return e;switch(r=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,r=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=c.call(i,t)}catch(o){n=[6,o],r=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},d=null,v=null,T=!1;function S(){return m(this,void 0,void 0,function(){var i,c;return p(this,function(t){switch(t.label){case 0:return typeof process<"u"&&process.versions!=null&&process.versions.node!=null?(i="http",[4,import(i)]):[3,3];case 1:return d=t.sent(),c="https",[4,import(c)];case 2:v=t.sent(),t.label=3;case 3:return T=!0,[2]}})})}function E(i,c){return m(this,void 0,void 0,function(){var t;return p(this,function(a){switch(a.label){case 0:return[4,fetch("".concat(c),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})];case 1:return t=a.sent(),t.ok?[2,t.json()]:[2,t.json().then(function(r){return Promise.reject(r)})]}})})}function M(i,c,t){return m(this,void 0,void 0,function(){var a,r,e,s;return p(this,function(u){return a=JSON.stringify(i),r=new URL(c),e={hostname:r.hostname,path:r.search?r.pathname+r.search:r.pathname,port:r.port,method:"POST",headers:{"Content-Type":"application/json","Content-Length":a.length},agent:t},s=c.includes("https")?v:d,[2,new Promise(function(h,n){var o=s.request(e,function(l){var w="";l.on("data",function(b){w+=b}),l.on("end",function(){return m(this,void 0,void 0,function(){var b;return p(this,function($){return b=JSON.parse(w),h(b),[2]})})})});o.on("error",function(l){n(l)}),o.write(a),o.end()})]})})}var x=function(){function i(c){if(this.url=void 0,this.agent=void 0,this.url=c,d!==null&&v!==null){var t=c.includes("https")?v:d;this.agent=new t.Agent({keepAlive:!0})}}return i.prototype.call=function(c){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return m(this,void 0,void 0,function(){var r,e;return p(this,function(s){switch(s.label){case 0:return r={jsonrpc:"2.0",method:c,params:t,id:3},e=void 0,T?[3,2]:[4,S()];case 1:s.sent(),s.label=2;case 2:return d!==null&&v!==null?[4,M(r,this.url,this.agent)]:[3,4];case 3:return e=s.sent(),[3,6];case 4:return[4,E(r,this.url)];case 5:e=s.sent(),s.label=6;case 6:return e.error?[2,e.error.message]:[2,e.result]}})})},i}();var g=function(i,c,t,a){function r(e){return e instanceof t?e:new t(function(s){s(e)})}return new(t||(t=Promise))(function(e,s){function u(o){try{n(a.next(o))}catch(l){s(l)}}function h(o){try{n(a.throw(o))}catch(l){s(l)}}function n(o){o.done?e(o.value):r(o.value).then(u,h)}n((a=a.apply(i,c||[])).next())})},y=function(i,c){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(n){return function(o){return h([n,o])}}function h(n){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(t=0)),t;)try{if(a=1,r&&(e=n[0]&2?r.return:n[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,n[1])).done)return e;switch(r=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,r=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=c.call(i,t)}catch(o){n=[6,o],r=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},k=function(){function i(){}return i.getAllTasksByUser=function(c){return g(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,i.remote.call("TaskService.getAllTasksByUser",c)];case 1:return[2,t.sent()]}})})},i.createTask=function(c,t){return g(this,void 0,void 0,function(){return y(this,function(a){switch(a.label){case 0:return[4,i.remote.call("TaskService.createTask",c,t)];case 1:return[2,a.sent()]}})})},i.updateTask=function(c,t,a,r){return g(this,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,i.remote.call("TaskService.updateTask",c,t,a,r)];case 1:return[2,e.sent()]}})})},i.deleteTask=function(c,t){return g(this,void 0,void 0,function(){return y(this,function(a){switch(a.label){case 0:return[4,i.remote.call("TaskService.deleteTask",c,t)];case 1:return[2,a.sent()]}})})},i.remote=new x("http://127.0.0.1:8083/TaskService"),i}();var B=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#DC3545" class="bi bi-trash-fill" viewBox="0 0 16 16">
<path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
</svg>`,f=localStorage.getItem("apiToken");f||(f=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),localStorage.setItem("apiToken",f));async function L(){document.getElementById("modal-error-elem").innerHTML="";let i=document.getElementById("task-title-input").value;if(!i){document.getElementById("modal-error-elem").innerHTML="Title is mandatory";return}k.createTask(f,i).then(c=>{if(!c.success){alert(`Unexpected error: ${c.err?c.err:"Please check the backend logs in the project dashboard - https://app.genez.io."}`);return}c.success&&location.reload()})}document.getElementById("add-task-btn").addEventListener("click",async i=>{i.preventDefault(),L()});k.getAllTasksByUser(f).then(i=>{if(!i.success){alert(`Unexpected error: ${i.err?i.err:"Please check the backend logs in the project dashboard - https://app.genez.io."}`);return}if(i.success)for(let t of i.tasks){let a=document.getElementById("tasks"),r=`<span>${t.title}</span>`,e=t.url?`at <a href="${t.url}" target="_blank"> ${t.url}</a>`:"",s=t.solved?"checked":"",u=`<button class="btn" onclick="">${B}</button>`;a.innerHTML+=`
        <div class="mb-3">
            <div class="d-flex align-items-center">
                <input type="checkbox" ${t.solved?"checked":""} class="task_checkbox" id=${t.id}>
                <p class="mb-0" style="margin-right: auto; margin-left: 20px">
                  ${r}
                  ${e}
                </p>
                <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Check out genezio challenge">
                  ${u}
                </span>
            </div>
        </div>
        `}let c=document.getElementsByClassName("task_checkbox");for(let t of c)t.addEventListener("change",async a=>{let r=a.target.id,e=i.tasks.find(s=>s.id===r);await k.updateTask(f,r,e.title,a.target.checked).then(s=>{if(!s.success){alert(`Unexpected error: ${s.err?s.err:"Please check the backend logs in the project dashboard - https://app.genez.io."}`);return}})})});})();
//# sourceMappingURL=bundle.js.map
